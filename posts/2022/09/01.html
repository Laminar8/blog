<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/blog/favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta http-equiv="content-security-policy" content=""><title>Subscribe Amazon RDS Notification And Get Notifications From Slack</title><meta name="description" content="Subscribe Amazon RDS Notification And Get Notifications From Slack" data-svelte="svelte-1x9odug"><!-- HTML_TAG_START --><style>pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}/*!
  Theme: GitHub
  Description: Light theme as seen on github.com
  Author: github.com
  Maintainer: @Hirse
  Updated: 2021-05-15

  Outdated base version: https://github.com/primer/github-syntax-light
  Current colors taken from GitHub's CSS
*/.hljs{color:#24292e;background:#fff}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#d73a49}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#6f42c1}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-variable{color:#005cc5}.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#032f62}.hljs-built_in,.hljs-symbol{color:#e36209}.hljs-code,.hljs-comment,.hljs-formula{color:#6a737d}.hljs-name,.hljs-quote,.hljs-selector-pseudo,.hljs-selector-tag{color:#22863a}.hljs-subst{color:#24292e}.hljs-section{color:#005cc5;font-weight:700}.hljs-bullet{color:#735c0f}.hljs-emphasis{color:#24292e;font-style:italic}.hljs-strong{color:#24292e;font-weight:700}.hljs-addition{color:#22863a;background-color:#f0fff4}.hljs-deletion{color:#b31d28;background-color:#ffeef0}</style><!-- HTML_TAG_END -->
	<link rel="stylesheet" href="/blog/_app/assets/pages/__layout.svelte-8e26d482.css">
	<link rel="stylesheet" href="/blog/_app/assets/pages/posts/2022/09/01.svelte-bc3ce70b.css">
	<link rel="stylesheet" href="/blog/_app/assets/code-b1a8dfc9.css">
	<link rel="stylesheet" href="/blog/_app/assets/posts-c3c7c38a.css">
	<link rel="stylesheet" href="/blog/_app/assets/url-92fc559d.css">
	<link rel="modulepreload" href="/blog/_app/start-a665aeac.js">
	<link rel="modulepreload" href="/blog/_app/chunks/index-b86b2985.js">
	<link rel="modulepreload" href="/blog/_app/pages/__layout.svelte-2eefbcb7.js">
	<link rel="modulepreload" href="/blog/_app/pages/posts/2022/09/01.svelte-6153e69d.js">
	<link rel="modulepreload" href="/blog/_app/chunks/code-4e203955.js">
	<link rel="modulepreload" href="/blog/_app/chunks/posts-c669fbf9.js">
	<link rel="modulepreload" href="/blog/_app/chunks/url-ce0407b4.js">
	<link rel="modulepreload" href="/blog/_app/chunks/annotation-665f6686.js">
	</head>
	<body>
		


<main class="svelte-1mdesu2"><div class="onboard svelte-1mdesu2">

<div class="header svelte-1my2263"><div class="left svelte-1my2263"><a href="/blog/posts"><div class="dot svelte-1my2263" style="width: undefinedpx; background-color: #DF7861;"></div>
				</a><div class="dot svelte-1my2263" style="width: undefinedpx; background-color: #FFB562;"></div><div class="dot svelte-1my2263" style="width: undefinedpx; background-color: #ADCF9F;"></div></div>
	<div class="center svelte-1my2263"><div class="title svelte-1my2263"><div slot="header"><div class="header svelte-1diewu8">Subscribe Amazon RDS Notification And Get Notifications From Slack
</div></div></div></div>
	<div class="right"></div></div>
<div class="content svelte-1my2263"><div class="left svelte-1my2263"></div>
	<div class="center svelte-1my2263"><div slot="center"><div class="title svelte-1ulewd">Subscribe Amazon RDS Notification And Get Notifications From Slack
</div>

		
		<div class="container svelte-iku5xz"><figure><img src="https://user-images.githubusercontent.com/52372569/188123705-e58d8e1b-6fcd-42a2-81d6-0f5b2f9c31e9.png" alt="Slack" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-iku5xz"><div slot="caption">@Image from
				<div class="href svelte-jsfa02"><a href="https://slack.com/features" class="svelte-jsfa02">Slack</a>
</div></div></figcaption></figure>
</div>
		<div class="container svelte-1nl2eag" style="border-left: 1rem solid #ffb562;"><div class="logo"><img src="/blog/_app/assets/stare-ed794b99.png" alt="Stare" class="svelte-1nl2eag"></div>
	<div class="message svelte-1nl2eag"><div class="name svelte-1nl2eag">Caution</div>
		<div class="content svelte-1nl2eag">This blog uses non-copyright images. If you are the owner of the image and want to protect the copyright, please contact me.</div></div>
</div>
		<div class="subtitle svelte-oo9etd">Before start
</div>
		<div class="content svelte-1nb29p1">A few days ago, I heard about two incidents causing a failure event that has a business
			impact. Each of them were that a minor update for RDS database engine had been done during the
			periodic maintenance period. While updating engines, the database server had been rebooted.
			The task was done after just five minutes. However some transactions have not been processed
			because of this update. This transactions have to be processed by administrators after update.
		
</div>
		<div class="content svelte-1nb29p1">I am monitoring many servers with
			


<div class="content svelte-rsy2x6"><span class="blue svelte-rsy2x6">Amazon CloudWatch</span>
		<span class="blue number svelte-rsy2x6">1</span>
</div> service. The servers which were created
			from 


<div class="content svelte-rsy2x6"><span class="blue svelte-rsy2x6">Amazon EC2</span>
		<span class="blue number svelte-rsy2x6">2</span>
</div>
			are running on the AWS. Default metrics like CPU utilization, network bandwidth are provided from
			Amazon Cloudwatch for free. With Amazon Cloudwatch service, you can configure your alarm which
			notify you when one of the metrics are met a condition of pre-defined rules.
			<div class="content svelte-76s24z"><div class="number svelte-76s24z"><span slot="number">1</span></div>
	<div class="annotation"><span slot="annotation">CloudWatch provides you with data and actionable insights to monitor your applications,
					respond to system-wide performance changes, and optimize resource utilization. CloudWatch
					collects monitoring and operational data in the form of logs, metrics, and events.
				</span></div>
</div>
			<div class="content svelte-76s24z"><div class="number svelte-76s24z"><span slot="number">2</span></div>
	<div class="annotation"><span slot="annotation">Amazon Elastic Compute Cloud (Amazon EC2) offers the broadest and deepest compute
					platform, with over 500 instances and choice of the latest processor, storage, networking,
					operating system, and purchase model to help you best match the needs of your workload.
				</span></div>
</div>
</div>
		<div class="content svelte-1nb29p1">Following <div class="href svelte-jsfa02"><a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/AlarmThatSendsEmail.html" class="svelte-jsfa02">Amazon Cloudwatch document</a>
</div> which says composite alarms can send 


<div class="content svelte-rsy2x6"><span class="blue svelte-rsy2x6">Amazon SNS</span>
		<span class="blue number svelte-rsy2x6">1</span>
</div>
			notifications when they change state, I have configured a alarm process which notify to administrators
			when changing the alarm state. After sending an alarm state to Amazon SNS, the service send to
			subscriptions like e-mail, 


<div class="content svelte-rsy2x6"><span class="blue svelte-rsy2x6">AWS Lambda</span>
		<span class="blue number svelte-rsy2x6">2</span>
</div> and etc.
			<div class="content svelte-76s24z"><div class="number svelte-76s24z"><span slot="number">1</span></div>
	<div class="annotation"><span slot="annotation">Amazon Simple Notification Service (Amazon SNS) is a fully managed messaging service for
					both application-to-application (A2A) and application-to-person (A2P) communication.
				</span></div>
</div>
			<div class="content svelte-76s24z"><div class="number svelte-76s24z"><span slot="number">2</span></div>
	<div class="annotation"><span slot="annotation">AWS Lambda is a serverless, event-driven compute service that lets you run code for
					virtually any type of application or backend service without provisioning or managing
					servers.
				</span></div>
</div>
</div>
		<div class="content svelte-1nb29p1">This process was also applied to RDS event notification. When events occur, each event are
			sent to Amazon SNS. The service receives messages and sends to AWS Lambda in my case.
		
</div>
		<div class="content svelte-1nb29p1">With AWS Lambda service, you can create a lambda function which runs your code without a
			server. I have wrote a code that was running on the NODEJS14 runtime to send the message from
			Amazon SNS to Slack. The message is a JSON format and raw text. To understand the message fast
			and concisely, it has to be parsed properly.
		
</div>
		<div class="content svelte-18aohhk"><div class="file svelte-18aohhk"><div slot="file">cloudwatch.json</div></div>
	<div class="code"><div slot="code">
  
  <pre data-language="json" class=" svelte-1xjucv4"><code class="hljs"><!-- HTML_TAG_START --><span class="hljs-punctuation">{</span>
	<span class="hljs-attr">&quot;Records&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
	  <span class="hljs-punctuation">{</span>
		<span class="hljs-attr">&quot;EventSource&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;aws:sns&quot;</span><span class="hljs-punctuation">,</span>
		<span class="hljs-attr">&quot;EventVersion&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0&quot;</span><span class="hljs-punctuation">,</span>
		<span class="hljs-attr">&quot;EventSubscriptionArn&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;arn:aws:sns:ap-southeast-1:123456789012:laminar:a6ea4892-f3e6-499c-a854-f53f544eef04&quot;</span><span class="hljs-punctuation">,</span>
		<span class="hljs-attr">&quot;Sns&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
		  <span class="hljs-attr">&quot;Type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Notification&quot;</span><span class="hljs-punctuation">,</span>
		  <span class="hljs-attr">&quot;MessageId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;57977499-a9d2-5e38-8b55-2f1bed8777af&quot;</span><span class="hljs-punctuation">,</span>
		  <span class="hljs-attr">&quot;TopicArn&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;arn:aws:sns:ap-southeast-1:123456789012:laminar&quot;</span><span class="hljs-punctuation">,</span>
		  <span class="hljs-attr">&quot;Subject&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;OK: &quot;</span>my-alarm<span class="hljs-string">&quot; in Asia Pacific (Singapore)&quot;</span><span class="hljs-punctuation">,</span>
		  <span class="hljs-attr">&quot;Message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;{&quot;</span>AlarmName<span class="hljs-string">&quot;:&quot;</span>my-alarm<span class="hljs-string">&quot;,&quot;</span>AlarmDescription<span class="hljs-string">&quot;:null,&quot;</span>AWSAccountId<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">123456789012</span><span class="hljs-string">&quot;,&quot;</span>AlarmConfigurationUpdatedTimestamp<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">2022</span><span class="hljs-number">-08</span><span class="hljs-number">-26</span>T03<span class="hljs-punctuation">:</span><span class="hljs-number">45</span><span class="hljs-punctuation">:</span><span class="hljs-number">34.563</span>+<span class="hljs-number">0000</span><span class="hljs-string">&quot;,&quot;</span>NewStateValue<span class="hljs-string">&quot;:&quot;</span>OK<span class="hljs-string">&quot;,&quot;</span>NewStateReason<span class="hljs-string">&quot;:&quot;</span>Threshold Crossed<span class="hljs-punctuation">:</span> <span class="hljs-number">1</span> out of the last <span class="hljs-number">1</span> datapoints <span class="hljs-punctuation">[</span><span class="hljs-number">3.6266666666666665</span> (<span class="hljs-number">26</span>/<span class="hljs-number">08</span>/<span class="hljs-number">22</span> <span class="hljs-number">03</span><span class="hljs-punctuation">:</span><span class="hljs-number">40</span><span class="hljs-punctuation">:</span><span class="hljs-number">00</span>)<span class="hljs-punctuation">]</span> was not less than the threshold (<span class="hljs-number">1.0</span>) (minimum <span class="hljs-number">1</span> datapoint for ALARM -&gt; OK transition).<span class="hljs-string">&quot;,&quot;</span>StateChangeTime<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">2022</span><span class="hljs-number">-08</span><span class="hljs-number">-26</span>T03<span class="hljs-punctuation">:</span><span class="hljs-number">46</span><span class="hljs-punctuation">:</span><span class="hljs-number">29.897</span>+<span class="hljs-number">0000</span><span class="hljs-string">&quot;,&quot;</span>Region<span class="hljs-string">&quot;:&quot;</span>Asia Pacific (Singapore)<span class="hljs-string">&quot;,&quot;</span>AlarmArn<span class="hljs-string">&quot;:&quot;</span>arn<span class="hljs-punctuation">:</span>aws<span class="hljs-punctuation">:</span>cloudwatch<span class="hljs-punctuation">:</span>ap-southeast<span class="hljs-number">-1</span><span class="hljs-punctuation">:</span><span class="hljs-number">123456789012</span><span class="hljs-punctuation">:</span>alarm<span class="hljs-punctuation">:</span>my-alarm<span class="hljs-string">&quot;,&quot;</span>OldStateValue<span class="hljs-string">&quot;:&quot;</span>ALARM<span class="hljs-string">&quot;,&quot;</span>OKActions<span class="hljs-string">&quot;:[&quot;</span>arn<span class="hljs-punctuation">:</span>aws<span class="hljs-punctuation">:</span>sns<span class="hljs-punctuation">:</span>ap-southeast<span class="hljs-number">-1</span><span class="hljs-punctuation">:</span><span class="hljs-number">123456789012</span><span class="hljs-punctuation">:</span>laminar<span class="hljs-string">&quot;],&quot;</span>AlarmActions<span class="hljs-string">&quot;:[&quot;</span>arn<span class="hljs-punctuation">:</span>aws<span class="hljs-punctuation">:</span>sns<span class="hljs-punctuation">:</span>ap-southeast<span class="hljs-number">-1</span><span class="hljs-punctuation">:</span><span class="hljs-number">123456789012</span><span class="hljs-punctuation">:</span>laminar<span class="hljs-string">&quot;],&quot;</span>InsufficientDataActions<span class="hljs-string">&quot;:[],&quot;</span>Trigger<span class="hljs-string">&quot;:{&quot;</span>MetricName<span class="hljs-string">&quot;:&quot;</span>CPUUtilization<span class="hljs-string">&quot;,&quot;</span>Namespace<span class="hljs-string">&quot;:&quot;</span>AWS/RDS<span class="hljs-string">&quot;,&quot;</span>StatisticType<span class="hljs-string">&quot;:&quot;</span>Statistic<span class="hljs-string">&quot;,&quot;</span>Statistic<span class="hljs-string">&quot;:&quot;</span>AVERAGE<span class="hljs-string">&quot;,&quot;</span>Unit<span class="hljs-string">&quot;:null,&quot;</span>Dimensions<span class="hljs-string">&quot;:[{&quot;</span>value<span class="hljs-string">&quot;:&quot;</span>database<span class="hljs-number">-1</span><span class="hljs-string">&quot;,&quot;</span>name<span class="hljs-string">&quot;:&quot;</span>DBInstanceIdentifier<span class="hljs-string">&quot;}],&quot;</span>Period<span class="hljs-string">&quot;:300,&quot;</span>EvaluationPeriods<span class="hljs-string">&quot;:1,&quot;</span>DatapointsToAlarm<span class="hljs-string">&quot;:1,&quot;</span>ComparisonOperator<span class="hljs-string">&quot;:&quot;</span>LessThanThreshold<span class="hljs-string">&quot;,&quot;</span>Threshold<span class="hljs-string">&quot;:1.0,&quot;</span>TreatMissingData<span class="hljs-string">&quot;:&quot;</span>missing<span class="hljs-string">&quot;,&quot;</span>EvaluateLowSampleCountPercentile<span class="hljs-string">&quot;:&quot;</span><span class="hljs-string">&quot;}}&quot;</span><span class="hljs-punctuation">,</span>
		  <span class="hljs-attr">&quot;Timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2022-08-26T03:46:29.953Z&quot;</span><span class="hljs-punctuation">,</span>
		<span class="hljs-punctuation">}</span>
	  <span class="hljs-punctuation">}</span>
	<span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span><!-- HTML_TAG_END --></code></pre>
</div></div>
</div>
		<div class="content svelte-1nb29p1">The above 


<div class="content svelte-rsy2x6"><span class="black background svelte-rsy2x6">cloudwatch.json</span>
</div> message from Amazon CloudWatch,
			for example, has a 


<div class="content svelte-rsy2x6"><span class="purple background svelte-rsy2x6">Records</span>
</div> key. The type of key
			is an array in NODEJS and a list in PYTHON. The first item of the key is JSON. A main key of the
			item is 


<div class="content svelte-rsy2x6"><span class="purple background svelte-rsy2x6">Sns</span>
</div>. This key differs from source like
			Amazon CloudWatch, Amazon RDS and etc. My NODEJS code was wrote for only messages from Amazon
			CloudWatch.
		
</div>

		
		<div class="subtitle svelte-oo9etd">The Goal
</div>
		<div class="content svelte-1nb29p1">All of the messages from Amazon Cloudwatch alarm, Amazon RDS event shoud be sent to slack
			successfully. That means a lambda function shoud be expandable for all Amazon SNS messages.
		
</div>
		<div class="container svelte-5snfk9"><div class="header svelte-5snfk9"><div class="tab"></div></div>
	<figure><img src="https://user-images.githubusercontent.com/52372569/188312397-678f8422-ccd0-44e8-ad16-90b2793318f8.png" alt="RDS console" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-5snfk9"></figcaption></figure>
	<div class="footer svelte-5snfk9"></div>
</div>
		<div class="container svelte-1nl2eag" style="border-left: 1rem solid #adcf9f;"><div class="logo"><img src="/blog/_app/assets/stare-ed794b99.png" alt="Stare" class="svelte-1nl2eag"></div>
	<div class="message svelte-1nl2eag"><div class="name svelte-1nl2eag">Information</div>
		<div class="content svelte-1nl2eag">This blog owner has a copyright of this image. If you don&#39;t think so, please contact me.</div></div>
</div>
		<div class="content svelte-1nb29p1">From creating a event subscription to be notified by a slack app, I would like to talk about
			all of the steps. Descriptions may be omitted unintentionally.
		
</div>

		
		<div class="subtitle svelte-oo9etd">Subscribe an event
</div>
		<div class="content svelte-1nb29p1">You could create an subscription on AWS console. Write
			<div class="content svelte-y0z98e"><div class="standard serviceSearch svelte-y0z98e"><svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="1.5rem" height="1.5rem" viewBox="0 0 1244 1280" preserveAspectRatio="xMidYMid meet" class="svelte-y0z98e"><metadata>Created by potrace 1.15, written by Peter Selinger 2001-2017 </metadata><g transform="translate(0,1280) scale(0.1,-0.1)" fill="#ffffff" stroke="none"><path d="M4025 12789 c-1029 -79 -1969 -501 -2704 -1214 -985 -955 -1456 -2292 -1285 -3650 156 -1244 849 -2360 1899 -3059 193 -129 272 -175 470 -274 452 -227 906 -362 1445 -429 207 -25 763 -25 970 0 404 50 752 138 1115 281 251 98 600 283 819 433 l80 54 1075 -1073 c3835 -3827 3770 -3762 3828 -3795 189 -105 411 -75 563 77 148 148 180 359 84 553 -21 43 -462 488 -2432 2459 -2212 2213 -2404 2408 -2392 2425 8 10 40 47 70 83 714 836 1088 1927 1031 3011 -32 610 -165 1136 -420 1664 -169 349 -340 615 -592 920 -106 128 -395 417 -524 524 -687 569 -1463 900 -2336 996 -174 19 -598 27 -764 14z m780 -949 c777 -118 1453 -463 1982 -1014 516 -536 829 -1194 930 -1951 24 -186 24 -618 0 -810 -54 -416 -158 -758 -342 -1125 -297 -593 -779 -1101 -1360 -1432 -964 -549 -2153 -590 -3152 -108 -975 470 -1667 1364 -1873 2420 -37 192 -51 323 -57 555 -6 258 4 423 42 651 161 971 742 1831 1588 2348 453 278 935 434 1512 490 22 2 164 3 315 1 217 -3 304 -8 415 -25z"></path></g></svg>
			RDS</div>
</div>
			on the search box at the top and Click
			<div class="content svelte-y0z98e"><div class="standard service svelte-y0z98e">RDS</div>
</div>
			from the results in the services.
		
</div>
		<div class="container svelte-5snfk9"><div class="header svelte-5snfk9"><div class="tab"></div></div>
	<figure><img src="https://user-images.githubusercontent.com/52372569/188320527-a31f777c-fc54-4ab7-aa5c-d8a9aaf7e21e.png" alt="RDS Event subscription" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-5snfk9"></figcaption></figure>
	<div class="footer svelte-5snfk9"></div>
</div>
		<div class="content svelte-w7ylg2"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg>
	
</div>
		<div class="content svelte-1nb29p1">On the side menu, click the
			<div class="content svelte-y0z98e"><div class="standard input svelte-y0z98e">Event subscriptions</div>
</div>. After entering the Event
			subscriptions page, click the
			<div class="content svelte-y0z98e"><div class="standard button svelte-y0z98e">Create event subscription</div>
</div>
			button.
		
</div>
		<div class="container svelte-5snfk9"><div class="header svelte-5snfk9"><div class="tab"></div></div>
	<figure><img src="https://user-images.githubusercontent.com/52372569/188319972-84b3a6b2-f8cb-4cb9-9176-1179712bc2b8.png" alt="RDS Event subscription" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-5snfk9"></figcaption></figure>
	<div class="footer svelte-5snfk9"></div>
</div>
		<div class="content svelte-w7ylg2"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg>
	
</div>
		<div class="content svelte-1nb29p1">Enter the your subscription name. In my case, I entered
			<div class="content svelte-y0z98e"><div class="standard input svelte-y0z98e">laminar</div>
</div>. After that, choose your Amazon SNS ARN. My
			target ARN is <div class="content svelte-y0z98e"><div class="standard inputSelect svelte-y0z98e">laminar
			<svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24" class="svelte-y0z98e"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div>
</div>. For easy resource
			management, I recommend that you specify the same subscription name and destination name.
		
</div>
		<div class="container svelte-5snfk9"><div class="header svelte-5snfk9"><div class="tab"></div></div>
	<figure><img src="https://user-images.githubusercontent.com/52372569/188323556-f72eb4fa-7320-49bb-af7b-0132a7ac6a5e.png" alt="RDS Event subscription" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-5snfk9"></figcaption></figure>
	<div class="footer svelte-5snfk9"></div>
</div>
		<div class="content svelte-w7ylg2"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg>
	
</div>
		<div class="content svelte-1nb29p1">You can choose source type from a source list. I want to subscribe events from my instances.
			So I choose <div class="content svelte-y0z98e"><div class="standard inputSelect svelte-y0z98e">Instances
			<svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24" class="svelte-y0z98e"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div>
</div> from types.
		
</div>
		<div class="container svelte-5snfk9"><div class="header svelte-5snfk9"><div class="tab"></div></div>
	<figure><img src="https://user-images.githubusercontent.com/52372569/189348189-b594ba6c-12b3-42df-b817-114fa07894fb.png" alt="RDS Event Source" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-5snfk9"></figcaption></figure>
	<div class="footer svelte-5snfk9"></div>
</div>
		<div class="content svelte-w7ylg2"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg>
	
</div>
		<div class="content svelte-1nb29p1">Leave the options below as defaults. After configuring the source, click the
			<div class="content svelte-y0z98e"><div class="standard button svelte-y0z98e">Create</div>
</div> button.
		
</div>
		<div class="content svelte-1nb29p1">If you want to listen a specific event from selected instances, you can choose a
			<div class="content svelte-y0z98e"><div class="standard select svelte-y0z98e"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" class="svelte-y0z98e"><circle cx="1.5rem" cy="1.5rem" r="0.5rem" stroke="#0073bb" stroke-width="5" fill="#ffffff"></circle></svg>
			Select specific instances</div>
</div> and a
			<div class="content svelte-y0z98e"><div class="standard select svelte-y0z98e"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" class="svelte-y0z98e"><circle cx="1.5rem" cy="1.5rem" r="0.5rem" stroke="#0073bb" stroke-width="5" fill="#ffffff"></circle></svg>
			Select specific event categories</div>
</div>options.
		
</div>
		<div class="container svelte-5snfk9"><div class="header svelte-5snfk9"><div class="tab"></div></div>
	<figure><img src="https://user-images.githubusercontent.com/52372569/188323913-21086efa-0b04-4fcc-8906-ca41009b0b26.png" alt="RDS Event subscription" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-5snfk9"></figcaption></figure>
	<div class="footer svelte-5snfk9"></div>
</div>
		<div class="content svelte-w7ylg2"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg>
	
</div>

		
		<div class="subtitle svelte-oo9etd">Create a Lambda function
</div>
		<div class="content svelte-1nb29p1">You could create an lambda function on AWS console. Write
			<div class="content svelte-y0z98e"><div class="standard serviceSearch svelte-y0z98e"><svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="1.5rem" height="1.5rem" viewBox="0 0 1244 1280" preserveAspectRatio="xMidYMid meet" class="svelte-y0z98e"><metadata>Created by potrace 1.15, written by Peter Selinger 2001-2017 </metadata><g transform="translate(0,1280) scale(0.1,-0.1)" fill="#ffffff" stroke="none"><path d="M4025 12789 c-1029 -79 -1969 -501 -2704 -1214 -985 -955 -1456 -2292 -1285 -3650 156 -1244 849 -2360 1899 -3059 193 -129 272 -175 470 -274 452 -227 906 -362 1445 -429 207 -25 763 -25 970 0 404 50 752 138 1115 281 251 98 600 283 819 433 l80 54 1075 -1073 c3835 -3827 3770 -3762 3828 -3795 189 -105 411 -75 563 77 148 148 180 359 84 553 -21 43 -462 488 -2432 2459 -2212 2213 -2404 2408 -2392 2425 8 10 40 47 70 83 714 836 1088 1927 1031 3011 -32 610 -165 1136 -420 1664 -169 349 -340 615 -592 920 -106 128 -395 417 -524 524 -687 569 -1463 900 -2336 996 -174 19 -598 27 -764 14z m780 -949 c777 -118 1453 -463 1982 -1014 516 -536 829 -1194 930 -1951 24 -186 24 -618 0 -810 -54 -416 -158 -758 -342 -1125 -297 -593 -779 -1101 -1360 -1432 -964 -549 -2153 -590 -3152 -108 -975 470 -1667 1364 -1873 2420 -37 192 -51 323 -57 555 -6 258 4 423 42 651 161 971 742 1831 1588 2348 453 278 935 434 1512 490 22 2 164 3 315 1 217 -3 304 -8 415 -25z"></path></g></svg>
			Lambda</div>
</div>
			on the search box at the top and Click
			<div class="content svelte-y0z98e"><div class="standard service svelte-y0z98e">Lambda</div>
</div>
			from the results in the services.
		
</div>
		<div class="container svelte-5snfk9"><div class="header svelte-5snfk9"><div class="tab"></div></div>
	<figure><img src="https://user-images.githubusercontent.com/52372569/189368580-e70430b6-c727-47a7-a3bb-1b65682705d3.png" alt="Lambda Fucntion" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-5snfk9"></figcaption></figure>
	<div class="footer svelte-5snfk9"></div>
</div>
		<div class="content svelte-w7ylg2"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg>
	
</div>
		<div class="content svelte-1nb29p1">If you are unable to view this <div class="content svelte-y0z98e"><div class="standard input svelte-y0z98e">Functions</div>
</div> page, click
			<div class="content svelte-y0z98e"><div class="standard input svelte-y0z98e">Functions</div>
</div> on the left menu bar. To create a lambda function,
			click the <div class="content svelte-y0z98e"><div class="standard button svelte-y0z98e">Create function</div>
</div> button at the top right corner.
		
</div>
		<div class="container svelte-5snfk9"><div class="header svelte-5snfk9"><div class="tab"></div></div>
	<figure><img src="https://user-images.githubusercontent.com/52372569/189377555-cfb043f3-0439-4259-91bb-72842079760c.png" alt="Lambda Fucntion" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-5snfk9"></figcaption></figure>
	<div class="footer svelte-5snfk9"></div>
</div>
		<div class="content svelte-w7ylg2"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg>
	
</div>
		<div class="content svelte-1nb29p1">You can set your function name. In my case, I name the function
			<div class="content svelte-y0z98e"><div class="standard input svelte-y0z98e">Notify-to-Slack</div>
</div>.
		
</div>
		<div class="container svelte-5snfk9"><div class="header svelte-5snfk9"><div class="tab"></div></div>
	<figure><img src="https://user-images.githubusercontent.com/52372569/189389419-411249a8-5ad9-4b40-ab36-386a3927aaf3.png" alt="Lambda Fucntion" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-5snfk9"></figcaption></figure>
	<div class="footer svelte-5snfk9"></div>
</div>
		<div class="content svelte-w7ylg2"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg>
	
</div>
		<div class="content svelte-1nb29p1">My sample code can run on the python environment. Choose the
			<div class="content svelte-y0z98e"><div class="standard inputSelect svelte-y0z98e">Python 3.9
			<svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24" class="svelte-y0z98e"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div>
</div> runtime from the supported runtime lists.
		
</div>
		<div class="container svelte-5snfk9"><div class="header svelte-5snfk9"><div class="tab"></div></div>
	<figure><img src="https://user-images.githubusercontent.com/52372569/189390401-41d5f516-56ae-40aa-867a-276e4b1d9a47.png" alt="Lambda Fucntion" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-5snfk9"></figcaption></figure>
	<div class="footer svelte-5snfk9"></div>
</div>
		<div class="content svelte-w7ylg2"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg>
	
</div>
		<div class="content svelte-1nb29p1">Leave the options below as defaults. Finally, click the
			<div class="content svelte-y0z98e"><div class="standard button svelte-y0z98e">Create function</div>
</div> button at the bottom right corner.
		
</div>
		<div class="content svelte-1nb29p1">This lambda function does not require additional permissions except for default permissions.
		
</div>
		<div class="container svelte-5snfk9"><div class="header svelte-5snfk9"><div class="tab"></div></div>
	<figure><img src="https://user-images.githubusercontent.com/52372569/189470159-bbb86fbf-b642-4fc0-8b3f-e34de4b6dbf4.png" alt="Lambda Fucntion" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-5snfk9"></figcaption></figure>
	<div class="footer svelte-5snfk9"></div>
</div>
		<div class="content svelte-w7ylg2"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg>
	
</div>
		<div class="content svelte-18aohhk"><div class="file svelte-18aohhk"><div slot="file">lambda_function.py</div></div>
	<div class="code"><div slot="code">
  
  <pre data-language="python" class=" svelte-1xjucv4"><code class="hljs"><!-- HTML_TAG_START -->
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">import</span> module.slack <span class="hljs-keyword">as</span> slack

<span class="hljs-keyword">def</span> <span class="hljs-title function_">lambda_handler</span>(<span class="hljs-params">event, context</span>):
	message = <span class="hljs-literal">True</span>

	<span class="hljs-keyword">try</span>:
		sns = event[<span class="hljs-string">&quot;Records&quot;</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&quot;Sns&quot;</span>]
	<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> error:
		<span class="hljs-comment"># Debug errors</span>
		<span class="hljs-built_in">print</span>(error)

		<span class="hljs-comment"># Give a notification to an administrator</span>
		sns = {
			<span class="hljs-string">&quot;Subject&quot;</span>: <span class="hljs-string">&quot;Fail to parse a coming sns event.&quot;</span>,
			<span class="hljs-string">&quot;Timestamp&quot;</span>: datetime.now(),
		}

		<span class="hljs-comment"># Change message value to False</span>
		message = <span class="hljs-literal">False</span>

	<span class="hljs-keyword">finally</span>:
		slack.post(sns, message)<!-- HTML_TAG_END --></code></pre>
</div></div>
</div>
		<div class="content svelte-1nb29p1">Copy the python code above and paste the code in your
			


<div class="content svelte-rsy2x6"><span class="black background svelte-rsy2x6">lambda_handler.py</span>
</div> python file.
		
</div>
		<div class="container svelte-5snfk9"><div class="header svelte-5snfk9"><div class="tab"></div></div>
	<figure><img src="https://user-images.githubusercontent.com/52372569/189470770-8df19e5a-5126-47fd-bdd7-fd3469aeadd4.png" alt="Lambda Fucntion" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-5snfk9"></figcaption></figure>
	<div class="footer svelte-5snfk9"></div>
</div>
		<div class="content svelte-w7ylg2"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg>
	
</div>
		<div class="content svelte-1nb29p1">After pasting the code, you create a new folder by clicking mouse right button and choosing
			the <div class="content svelte-y0z98e"><div class="standard lambda svelte-y0z98e">New Folder</div>
</div> option.
		
</div>
		<div class="container svelte-5snfk9"><div class="header svelte-5snfk9"><div class="tab"></div></div>
	<figure><img src="https://user-images.githubusercontent.com/52372569/189471063-0b3722a3-1a50-422e-bf7e-141302acf7ae.png" alt="Lambda Fucntion" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-5snfk9"></figcaption></figure>
	<div class="footer svelte-5snfk9"></div>
</div>
		<div class="content svelte-w7ylg2"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg>
	
</div>
		<div class="content svelte-1nb29p1">You click the mouse right button on your new folder and click the
			<div class="content svelte-y0z98e"><div class="standard lambda svelte-y0z98e">Rename</div>
</div> for entering a new name
			<div class="content svelte-y0z98e"><div class="standard input svelte-y0z98e">module</div>
</div>.
		
</div>
		<div class="container svelte-5snfk9"><div class="header svelte-5snfk9"><div class="tab"></div></div>
	<figure><img src="https://user-images.githubusercontent.com/52372569/189471142-c5ec5a48-4ab6-45fe-9c54-6191a91a3697.png" alt="Lambda Fucntion" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-5snfk9"></figcaption></figure>
	<div class="footer svelte-5snfk9"></div>
</div>
		<div class="content svelte-w7ylg2"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg>
	
</div>
		<div class="content svelte-1nb29p1">To create a python file for sending messages to Slack with formatted blocks, click mouse right
			button on your new folder and choose the <div class="content svelte-y0z98e"><div class="standard lambda svelte-y0z98e">New File</div>
</div> option
			like you created a new folder before.
		
</div>
		<div class="container svelte-5snfk9"><div class="header svelte-5snfk9"><div class="tab"></div></div>
	<figure><img src="https://user-images.githubusercontent.com/52372569/189471639-dd979b35-ee61-4c50-a5b4-564842b17ef8.png" alt="Lambda Fucntion" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-5snfk9"></figcaption></figure>
	<div class="footer svelte-5snfk9"></div>
</div>
		<div class="content svelte-w7ylg2"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg>
	
</div>
		<div class="content svelte-1nb29p1">You click the mouse right button on your new folder and click the
			<div class="content svelte-y0z98e"><div class="standard lambda svelte-y0z98e">Rename</div>
</div> for entering a new name
			<div class="content svelte-y0z98e"><div class="standard input svelte-y0z98e">slack</div>
</div>.
		
</div>
		<div class="container svelte-5snfk9"><div class="header svelte-5snfk9"><div class="tab"></div></div>
	<figure><img src="https://user-images.githubusercontent.com/52372569/190206647-775f8755-9f3b-48ff-99d0-4a42f4a211b0.png" alt="Lambda Fucntion" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-5snfk9"></figcaption></figure>
	<div class="footer svelte-5snfk9"></div>
</div>
		<div class="content svelte-w7ylg2"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg>
	
</div>
		<div class="content svelte-18aohhk"><div class="file svelte-18aohhk"><div slot="file">slack.py</div></div>
	<div class="code"><div slot="code">
  
  <pre data-language="python" class=" svelte-1xjucv4"><code class="hljs"><!-- HTML_TAG_START -->
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, timezone, timedelta

<span class="hljs-comment"># Slack</span>
<span class="hljs-comment"># Get from https://api.slack.com/apps</span>
token = os.environ[<span class="hljs-string">&quot;token&quot;</span>]
channel_id = os.environ[<span class="hljs-string">&quot;channel_id&quot;</span>]

method = <span class="hljs-string">&quot;POST&quot;</span>
headers = {<span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json&quot;</span>, <span class="hljs-string">&quot;Authorization&quot;</span>: <span class="hljs-string">f&quot;Bearer <span class="hljs-subst">{token}</span>&quot;</span>}
url = <span class="hljs-string">&quot;https://slack.com/api/chat.postMessage&quot;</span>

<span class="hljs-comment"># Unnecessary cloudwatch alarms</span>
cloudwatch_keys = [
	<span class="hljs-string">&quot;AWSAccountId&quot;</span>,
	<span class="hljs-string">&quot;AlarmConfigurationUpdatedTimestamp&quot;</span>,
	<span class="hljs-string">&quot;OKActions&quot;</span>,
	<span class="hljs-string">&quot;AlarmActions&quot;</span>,
	<span class="hljs-string">&quot;InsufficientDataActions&quot;</span>,
	<span class="hljs-string">&quot;AlarmArn&quot;</span>,
]
rds_keys = [<span class="hljs-string">&quot;Identifier Link&quot;</span>, <span class="hljs-string">&quot;Source ARN&quot;</span>]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_message</span>(<span class="hljs-params">sns, msg=<span class="hljs-literal">True</span></span>):
	<span class="hljs-keyword">if</span> msg:
		message = json.loads(sns[<span class="hljs-string">&quot;Message&quot;</span>])

		<span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(message.keys()) &gt;= <span class="hljs-number">10</span>:
			message_block = [
				{
					<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;divider&quot;</span>,
				},
				{
					<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;section&quot;</span>,
					<span class="hljs-string">&quot;fields&quot;</span>: [
						{<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;mrkdwn&quot;</span>, <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">f&quot;*<span class="hljs-subst">{k}</span>:*\n&gt;<span class="hljs-subst">{message[k]}</span>\n&quot;</span>}
						<span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">list</span>(message.keys())[:<span class="hljs-number">10</span>]
						<span class="hljs-keyword">if</span> k <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> cloudwatch_keys + rds_keys
					],
				},
			]
		<span class="hljs-keyword">else</span>:
			message_block = [
				{
					<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;divider&quot;</span>,
				},
				{
					<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;section&quot;</span>,
					<span class="hljs-string">&quot;fields&quot;</span>: [
						{<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;mrkdwn&quot;</span>, <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">f&quot;*<span class="hljs-subst">{k}</span>:*\n&gt;<span class="hljs-subst">{message[k]}</span>\n&quot;</span>}
						<span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> message.keys()
						<span class="hljs-keyword">if</span> k <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> cloudwatch_keys + rds_keys
					],
				},
			]
	<span class="hljs-keyword">else</span>:
		message_block = []
	
	<span class="hljs-keyword">return</span> json.dumps(
		{
			<span class="hljs-string">&quot;channel&quot;</span>: channel_id,
			<span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">f&quot;<span class="hljs-subst">{sns[<span class="hljs-string">&#x27;Subject&#x27;</span>]}</span> \n&quot;</span>,
			<span class="hljs-string">&quot;blocks&quot;</span>: [
				{
					<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;header&quot;</span>,
					<span class="hljs-string">&quot;text&quot;</span>: {<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;plain_text&quot;</span>, <span class="hljs-string">&quot;text&quot;</span>: sns[<span class="hljs-string">&quot;Subject&quot;</span>]},
				},
			]
			+ message_block,
		}
	)
	  
<span class="hljs-keyword">def</span> <span class="hljs-title function_">post</span>(<span class="hljs-params">sns, msg</span>):
	data = create_message(sns, msg)
	response = requests.request(method, url, headers=headers, data=data)
	output = response.json()

	<span class="hljs-keyword">return</span> output
<!-- HTML_TAG_END --></code></pre>
</div></div>
</div>
		<div class="content svelte-1nb29p1">Copy the python code above and paste the code in your
			


<div class="content svelte-rsy2x6"><span class="black background svelte-rsy2x6">slack.py</span>
</div> python file.
		
</div>
		<div class="container svelte-5snfk9"><div class="header svelte-5snfk9"><div class="tab"></div></div>
	<figure><img src="https://user-images.githubusercontent.com/52372569/190210628-83691574-1821-413b-9bd7-196e054d9074.png" alt="Lambda Fucntion" style="max-width: 100%;" slot="image">
		<figcaption class="svelte-5snfk9"></figcaption></figure>
	<div class="footer svelte-5snfk9"></div>
</div>
		<div class="content svelte-w7ylg2"><svg xmlns="http://www.w3.org/2000/svg" width="3rem" height="3rem" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg>
	
</div>

		
		<div class="footer svelte-59dbvb">Â© Copyright 2022
	<span class="color svelte-59dbvb">Laminar</span>
</div></div></div>
	<div class="right svelte-1my2263"><div slot="right"><div class="container svelte-1dabl0w"><div class="message svelte-1dabl0w">Last Updated</div>
	<div class="date svelte-1dabl0w"><div class="content svelte-1dabl0w">2022/09/10</div></div>
</div>
		<div class="container svelte-nsz5jp"><div class="message svelte-nsz5jp">Status</div>
	<div class="status svelte-nsz5jp"><div class="content svelte-nsz5jp">In progress
			</div></div>
</div>
		<div class="container svelte-12fu4dh"><div class="message svelte-12fu4dh">Tags</div>
	<div class="tag svelte-12fu4dh"><div class="content svelte-12fu4dh">Slack
			</div><div class="content svelte-12fu4dh">AWS
			</div><div class="content svelte-12fu4dh">RDS
			</div></div>
</div></div></div>
</div></div>
</main>


		<script type="module" data-sveltekit-hydrate="mdn17o">
		import { start } from "/blog/_app/start-a665aeac.js";
		start({
			target: document.querySelector('[data-sveltekit-hydrate="mdn17o"]').parentNode,
			paths: {"base":"/blog","assets":"/blog"},
			session: {},
			route: true,
			spa: false,
			trailing_slash: "never",
			hydrate: {
				status: 200,
				error: null,
				nodes: [
					import("/blog/_app/pages/__layout.svelte-2eefbcb7.js"),
						import("/blog/_app/pages/posts/2022/09/01.svelte-6153e69d.js")
				],
				params: {},
				routeId: "posts/2022/09/01"
			}
		});
	</script>
	</body>
</html>
